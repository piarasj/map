# MapaLister
Take a list, show a map.

## Project Overview

MapaLister is a Progressive Web App (PWA) that transforms data into interactive maps with powerful listing and search capabilities. It's built with vanilla JavaScript and uses Mapbox GL JS for mapping functionality.

## Architecture

### Core Components

- **managers/**: Contains all major functionality managers
  - `unified-map-manager.js` - Main map initialization and marker management
  - `data-manager.js` - Data processing and dataset filtering
  - `sidebar-manager.js` - Sidebar content and interactions
  - `settings-manager.js` - Application settings and overlays
  - `file-upload-manager.js` - File upload and processing
  - `keyboard-manager.js` - Keyboard shortcuts and interactions
  - `welcome-overlay-manager.js` - Welcome screen management

- **scripts/**: Main application integration
  - `main-integration.js` - Application initialization and event coordination
  - `notification-system.js` - User notifications

- **config/**: Configuration and utilities
  - `data-config.js` - Dynamic data configuration based on uploaded content
  - `distance-utils.js` - Distance calculations and formatting

- **utils/**: Utility functions
  - `popup-utils.js` - Map popup creation and management
  - `lucide-utils.js` - Icon rendering utilities

### Key Dependencies

- **Mapbox GL JS** v2.15.0 - Core mapping functionality
- **Lucide** - Icon library
- **Outfit** font family - UI typography

### Data Flow

1. User uploads GeoJSON data via `file-upload-manager.js`
2. `data-manager.js` processes and analyzes the data using `DataConfig`
3. Map markers are created via `unified-map-manager.js`
4. Sidebar listings are generated by `sidebar-manager.js`
5. User interactions are handled through event bus system in `main-integration.js`

## Development Commands

This is a client-side only application with no build system. Development is done by:

1. **Running locally**: Use a local web server (e.g., `python -m http.server` or Live Server extension)
2. **Testing**: Open `index.html` in a modern browser with developer tools
3. **Debugging**: Use browser console - extensive logging is built into all modules

## Key Features

- **Multi-dataset support**: Can handle GeoJSON files with multiple datasets
- **Dynamic configuration**: Automatically adapts to uploaded data structure
- **Distance calculations**: Reference marker system for distance measurements
- **Responsive design**: Works on desktop and mobile with PWA capabilities
- **Keyboard shortcuts**: Full keyboard navigation support
- **Settings persistence**: User preferences saved to localStorage

## Important Notes

- The application uses a modular architecture with dependency injection
- All modules check for dependencies before initializing
- Event bus pattern is used for component communication
- Map token is embedded in `index.html` (line 93)
- User's map token is in provided upload
- No external API calls except to Mapbox services
- All data processing happens client-side

## File Structure Patterns

- Manager files follow the pattern: `managers/[name]-manager.js`
- Each manager is wrapped in an IIFE with dependency checking
- Global objects are exposed via `window.[ManagerName]`
- Event-driven architecture using custom events and event bus

## Testing

- Manual testing through browser developer tools
- Console logging provides detailed debugging information
- No automated test suite currently implemented